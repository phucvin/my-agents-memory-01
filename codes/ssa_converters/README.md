# SSA Converters Prototype

This project prototypes three different Code to SSA (Static Single Assignment) converters sharing a common Intermediate Representation (IR).

## Implemented SSA Forms

1.  **Standard SSA**: The classic Cytron et al. form using Phi functions at the beginning of basic blocks to merge values from different predecessors.
2.  **Functional SSA**: An SSA form where Basic Blocks are treated like functions with arguments. Phi nodes are replaced by block parameters, and jumps/branches pass arguments to the target block.
3.  **Pizlo SSA (SSA-SSU)**: Based on the "Pizlo Form" or "SSA-SSU" (Static Single Use) form. It decouples SSA from the CFG by using `Upsilon` instructions to store values to "shadow variables" in predecessor blocks and parameter-less `Phi` instructions to load them in merge blocks.

## Directory Structure

- `ir.py`: Defines the Instruction classes (`Const`, `BinOp`, `Jump`, `Branch`, `Phi`, `Upsilon`, `Print`, `Return`), `BasicBlock`, and `Function`.
- `dom.py`: Implements Dominator Tree and Dominance Frontier calculations.
- `standard_ssa.py`: Converts Non-SSA IR to Standard SSA.
- `functional_ssa.py`: Converts IR to Functional SSA (via Standard SSA).
- `pizlo_ssa.py`: Converts IR to Pizlo SSA (via Standard SSA).
- `test_cases.py`: Contains a sample program with `if` and `while` loop.
- `main.py`: Driver script to run the conversion on test cases and verify output.
- `output_*.txt`: Output files generated by `main.py`.

## Usage

Run the main script to generate outputs:

```bash
python3 codes/ssa_converters/main.py
```

The output will be printed to stdout and saved to `codes/ssa_converters/output_*.txt`.

## Example Output (Snippet)

**Original Loop Header:**
```
loop_header:
    loop_cond = >(y, 0)
    Branch(loop_cond, loop_body, exit)
```

**Standard SSA:**
```
loop_header:
    y_1 = Phi(then: y_0, else: y_0, loop_body: y_2)
    x_3 = Phi(then: x_1, else: x_2, loop_body: x_4)
    loop_cond_1 = >(y_1, 0)
    Branch(loop_cond_1, loop_body, exit)
```

**Pizlo SSA:**
```
loop_header:
    y_1 = Phi()
    x_3 = Phi()
    loop_cond_1 = >(y_1, 0)
    Branch(loop_cond_1, loop_body, exit)
```
(Predecessors contain `Upsilon(val, ^y_1)` and `Upsilon(val, ^x_3)`)
